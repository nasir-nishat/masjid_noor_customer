import 'package:flutter/material.dart';import 'package:masjid_noor_customer/mgr/models/product_md.dart';import 'package:masjid_noor_customer/mgr/services/api_service.dart';import 'package:masjid_noor_customer/presentation/pages/cart/cart_controller.dart';import 'package:masjid_noor_customer/presentation/pages/product/product_controller.dart';import 'package:mobile_scanner/mobile_scanner.dart';class BarcodeScannerSimple extends StatefulWidget {  const BarcodeScannerSimple({super.key});  @override  State<BarcodeScannerSimple> createState() => _BarcodeScannerSimpleState();}class _BarcodeScannerSimpleState extends State<BarcodeScannerSimple> {  Barcode? _barcode;  Widget _buildBarcode(Barcode? value) {    if (value == null) {      return const Text(        "Scan Product's Barcode!",        overflow: TextOverflow.fade,        style: TextStyle(color: Colors.white),      );    }    return Text(      value.displayValue ?? 'No display value.',      overflow: TextOverflow.fade,      style: const TextStyle(color: Colors.white),    );  }  void _handleBarcode(BarcodeCapture barcodes) async {    if (mounted) {      setState(() {        _barcode = barcodes.barcodes.firstOrNull;      });    }    if (_barcode != null) {      ProductMd? product = await ProductController.to          .searchProductByBarcode(_barcode!.displayValue!);      if (product != null) {        CartController.to.addToCart(product);      }    }    if (mounted) Navigator.of(context).pop();  }  @override  Widget build(BuildContext context) {    return Scaffold(      appBar: AppBar(title: const Text('Scan the Product')),      body: Stack(        children: [          MobileScanner(            onDetect: _handleBarcode,            fit: BoxFit.cover,          ),        ],      ),    );  }}