import 'package:flutter/material.dart';import 'package:flutter_screenutil/flutter_screenutil.dart';import 'package:get/get.dart';import 'package:masjid_noor_customer/mgr/models/product_md.dart';import 'package:masjid_noor_customer/presentation/pages/product/product_controller.dart';import 'package:masjid_noor_customer/presentation/widgets/product_item.dart';import '../../../navigation/router.dart';class SearchPage extends GetView<ProductController> {  const SearchPage({super.key});  @override  Widget build(BuildContext context) {    final TextEditingController searchController = TextEditingController();    final ScrollController scrollController = ScrollController();    scrollController.addListener(() {      if (scrollController.position.extentAfter < 500 &&          !controller.isLoading.value) {        controller.loadMoreSearchProducts(searchController.text);      }    });    return Obx(() => Column(          children: [            AppBar(              title: TextField(                controller: searchController,                autofocus: true,                decoration: InputDecoration(                  hintText: 'Search by name or description',                  border: InputBorder.none,                  suffixIcon: InkWell(                    onTap: () {                      controller.searchProducts(searchController.text);                    },                    child: const Icon(Icons.search),                  ),                ),                onSubmitted: (query) => controller.searchProducts(query),              ),            ),            SizedBox(height: 10.h),            Expanded(              child: Column(                children: [                  Expanded(                    child: GridView.builder(                      controller: scrollController,                      padding: EdgeInsets.symmetric(horizontal: 12.w),                      gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(                        crossAxisCount: 2,                        crossAxisSpacing: 10.w,                        mainAxisSpacing: 10.h,                        childAspectRatio: 0.8,                      ),                      itemCount: controller.searchedProducts.length,                      itemBuilder: (context, index) {                        if (controller.searchedProducts.isEmpty) {                          return const Center(child: Text('No products found'));                        }                        ProductMd product = controller.searchedProducts[index];                        return ProductItem(                            product: product, parentRoute: Routes.search);                      },                    ),                  ),                ],              ),            ),          ],        ));  }}